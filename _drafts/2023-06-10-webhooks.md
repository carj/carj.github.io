---
layout: post
title: Event-Driven Integrations. Using The Webhook API To Create Custom Business Processes

---

This article is a based on the talk of the same name given to the 2023 Preservica User Group in Oxford.

### Introduction to webhooks and APIs

Webhooks are a type of API which allow apps to stay up-to-date with real-time information. Webhooks are also called event-driven APIs and are typically used to provide other applications with real-time data. 

Using webhooks, applications can send you data automatically when certain events are triggered.

This allows to custom business processes to be created based on events within Preservica

 ![Webhook](/public/images/webhook1.png)


### Preservica Webhooks

Webhooks are a new API introduced in Preservica v6.8.  They are based on a publisher-subscriber pattern.

Preservica is the publisher and will send messages to all registered subscribers when certain events are triggered within the system.

The key difference between webhooks and traditional APIs is Who triggers the process. With traditional APIs the trigger is an event outside of Preservica and with webhooks the trigger is an event inside Preservica.

Webhooks work best when you need to take some action when something new has happened within Preservica.


Preservica has provided two events as part of the first webhook release with v6.8

 
 * Ingesting Assets

 * Moving Assets


### Webhook Documentation

The webhook API is documented in the official Preservica [Swagger pages](https://demo.preservica.com/api/webhook/documentation.html) and the 3rd party [pyPreservica](https://pypreservica.readthedocs.io/en/latest/webhooks.html) Python SDK


### Subscribing

Before a system can receive notifications from Preservica, it must subscribe to a notification trigger.

When creating a new subscription service, you need to generate a shared secret key and pass it as an argument to the subscribe method. This is then used by the web server to verify the messages sent by Preservica are genuine (spoofing attacks). 

Using the PyPreservica SDK to create a new subscription to Ingested events


```python
from pyPreservica import *

webhook = WebHooksAPI()

subscription = webhook.subscribe("http://my-webhook.com:8080", TriggerType.INDEXED, "secret_key")

```



### Receiving Events

To receive web hook notifications pyPreservica has provided a reference web server implementation which provides support for the negotiation of the challenge request handshake during the subscription request and verification of each webhook event request.

To implement the web server, extend the base class WebHookHandler and implement a single method do_WORK() this method is called every time Preservica calls the web hook. This method is therefore where any processing takes place.  



```python

class MyWebhook(WebHookHandler):
  def do_WORK(json):
   

```


